<?php
/**
 * JLoaderTest
 *
 * @package   Joomla.UnitTest
 * @copyright Copyright (C) 2005 - 2012 Open Source Matters. All rights reserved.
 * @license   GNU General Public License
 */
//require_once 'PHPUnit/Framework.php';
require_once 'PHPUnit/Autoload.php';

// Register library prefix
JLoader::registerPrefix('Redform', JPATH_LIBRARIES . '/redform');

/**
 * Test class for currency.
 * Generated by PHPUnit on 2009-10-16 at 23:32:06.
 *
 * @package	redFORM.UnitTest
 */
class helperTest extends JoomlaTestCase
{
	public function getTestExtractEmailsData()
	{
		return array(
			'nothing' => array('', false, array()),
			'nothing 2' => array('', true, array()),
			'just one' => array('mine@anemail.com', true, array('mine@anemail.com')),
			'just one with , delimiter' => array('mine@anemail.com, ', true, array('mine@anemail.com')),
			'just one with ; delimiter' => array('mine@anemail.com , ', true, array('mine@anemail.com')),
			'just one with ; delimiter' => array('mine@anemail.com; ', true, array('mine@anemail.com')),
			'just one with ; delimiter' => array('mine@anemail.com ; ', true, array('mine@anemail.com')),
			'several with , delimiter' => array('mine@anemail.com , another@anot.the ', true, array('mine@anemail.com', 'another@anot.the')),
			'several with ; delimiter' => array('mine@anemail.com ; another@anot.the ;', true, array('mine@anemail.com', 'another@anot.the')),
			'several with ; delimiter and wrong one' => array('mine@anemail.com ; asds12; another@anot.the ;', true, array('mine@anemail.com', 'another@anot.the')),
		);
	}

	/**
	 * test get extractEmails function
	 *
	 * @param   string  $text      text
	 * @param   bool    $validate  validate emails
	 * @param   mixed   $expected  expected text
	 *
	 * @return void
	 *
	 * @dataProvider getTestExtractEmailsData
	 */
	public function testExtractEmails($text, $validate, $expected)
	{
		$resp = RedformHelper::extractEmails($text, $validate);
		$this->assertTrue(count($expected) == count(array_intersect($expected, $resp)));
	}
}
